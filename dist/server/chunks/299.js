"use strict";exports.id=299,exports.ids=[299],exports.modules={4299:(e,t,r)=>{r.d(t,{FileStorage:()=>n});var s=r(3292),i=r.n(s),a=r(1017),o=r.n(a);class c extends Error{constructor(e){super(e),this.name="FileStorageError"}}class n{constructor(e,t,r){this.isSetup=!1,this.directory=e,this.createIfNotExists=r,this.filePath=o().join(e,`${t}.json`)}transaction(){throw Error("Method not implemented.")}static async create(e,t,r=!0){let s=new n(e,t,r);return await s.setup(),s}async setup(){this.isSetup||(this.createIfNotExists&&(await this.ensureDirectoryExists(),await this.ensureFileExists()),this.isSetup=!0)}async ensureDirectoryExists(){try{await i().access(this.directory)}catch{try{await i().mkdir(this.directory,{recursive:!0})}catch(e){throw new c(`Failed to create directory: ${e&&"object"==typeof e&&"message"in e?e.message:"An unknown error occurred"}`)}}}async ensureFileExists(){try{await i().access(this.filePath)}catch{try{await i().writeFile(this.filePath,JSON.stringify({}))}catch(e){throw new c(`Failed to create file: ${e&&"object"==typeof e&&"message"in e?e.message:"An unknown error occurred"}`)}}}async get(e){try{let t=JSON.parse(await i().readFile(this.filePath,"utf8"));return t[e]||null}catch(e){throw new c(`Failed to get data: ${e instanceof Error?e.message:"An unknown error occurred"}`)}}async set(e,t){try{let r=JSON.parse(await i().readFile(this.filePath,"utf8"));r[e]=t,await i().writeFile(this.filePath,JSON.stringify(r))}catch(e){throw new c(`Failed to set data: ${e&&"object"==typeof e&&"message"in e?e.message:"An unknown error occurred"}`)}}async remove(e){try{let t=JSON.parse(await i().readFile(this.filePath,"utf8"));delete t[e],await i().writeFile(this.filePath,JSON.stringify(t))}catch(e){throw new c(`Failed to remove data: ${e&&"object"==typeof e&&"message"in e?e.message:"An unknown error occurred"}`)}}}}};